<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>test</title>
  <style type="text/css">
    #text {
      position: relative;
      text-align: center;
      font-size: xx-large;
    }
  </style>
</head>
<body>
<div id="text">
</div>
<div id="add-text">
  <input type="text" id="add-left-text" placeholder="Add left text" />
  <input type="text" id="add-right-text" placeholder="Add right text" />
  <button type="button" id="add-text-btn">Add text</button>
</div>
<script type="module">
  import {createAnimation} from "./text-animation.js";

  const $text = document.getElementById("text");

  const texts = [
    {left: "Happy", right: "Birthday"},
    {left: "Web", right: "Animations"},
    {left: "Something", right: "Textable"}
  ];

  texter();

  function texter() {
    const {left, right} = texts[Math.floor(Math.random() * texts.length)];

    $text.innerHTML = "";
    createAnimation($text, left, right).start(1000).then((animations) => {
      console.log("done!");
      return Promise.all(animations.map(anim => new Promise(resolve => {
        anim.reverse();
        anim.onfinish = resolve;
      })));
    }).then(texter);
  }
</script>
</body>
</html>